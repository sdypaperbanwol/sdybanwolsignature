<script>
  const canvas = document.getElementById("sigCanvas");
  const ctx = canvas.getContext("2d");

  function submitForm() {
    const name = document.getElementById("name").value.trim();
    if (!name) return alert("이름을 입력해주세요.");

    const signature = canvas.toDataURL("image/png");

    const formData = new URLSearchParams();
    formData.append("name", name);
    formData.append("signature", signature);

    fetch("https://script.google.com/macros/s/AKfycbwrWTznFUdPdOxhODKxlvTkvRRe1cTr6IntOPQzJcmWqw6B2FTjbfV2cmVhPgH6hPW-/exec", {
      method: "POST",
      body: formData
    })
    .then(response => {
      if (response.ok) return response.json();
      throw new Error("네트워크 응답 오류");
    })
    .then(data => {
      alert("서명이 저장되었습니다.");
      clearCanvas();
      document.getElementById("name").value = "";
    })
    .catch(error => {
      console.error("Fetch error:", error);
      alert("오류 발생: " + error.message);
    });
  }

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
</script>
